<!DOCTYPE HTML>
<!-- <html lang="en-US"> -->
<html lang="en-US" class="fade">
<!-- 
  ^ a class of "fade" makes slides fade smoothly into one another
 -->
<!-- <html lang="en-US" class="nonumbers"> -->
<!-- 
  If you want no numbers on the slides add a "nonumbers" class 
  to the HTML element.
  Adding a class of "fade" will make slides fade into another. 
-->
<head>
  <meta charset="UTF-8">
  <title>WebRender 2</title>
<!-- 
  If you upload your slides to the web, ensure that you have 
  a good title - this shows up in search results and social
  media links
 -->
  <meta name="viewport" content="width=device-width, user-scalable=yes">
  <link rel="stylesheet" href="themes/mozilla/styles/style.css">
</head>
<body class="list">
  <div id="title" class="slide oneline"><div>
    <section>
      <header>
        <h2>WebRender 2</h2>
      </header>
      <footer class="notes">
      </footer>
    </section>
  </div></div>  

  <div id="recap" class="slide"><div>
    <section>
      <header>
        <h2>WebRender recap</h2>
      </header>
      <ul>
        <li>Experimental GPU renderer for Servo.</li>
        <li>Renders most CSS content (that Servo supports).</li>
        <li>Fairly "traditional" GPU renderer - batching, quads etc.</li>
        <li>Some features difficult to add without affecting other parts (e.g. anti-aliasing, clip paths).</li>
        <li>Performance on some pages still not ideal.</li>
      </ul>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="bhtml1" class="slide"><div>
    <section>
      <header>
        <h2>browser.html tab switch</h2>
      </header>
      <img src="pictures/xf.gif" 
           class="middle"
           style="width: 600px;"
           >
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="overdraw" class="slide"><div>
    <section>
      <header>
        <h2>Overdraw!!</h2>
      </header>
      <img src="pictures/ddg3.png" 
           class="middle"
           style="width: 600px;"
           >
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="perf" class="slide"><div>
    <section>
      <header>
        <h2>GPU perf 101</h2>
      </header>
      <p style="text-align: center;">Fragment shader and ROP is always the problem!</p>
      <p style="text-align: center;">(On a hi-dpi screen)</p>
      <p style="text-align: center;">(Well, assuming other best practices like batching, geometry management are followed).</p>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="how" class="slide"><div>
    <section>
      <header>
        <h2>How to go fast?</h2>
      </header>
      <p>Minimize overdraw (draw fewer pixels).</p>
      <p>Minimize ROP (raster ops - e.g. stencil, alpha blend etc)</p>
      <p>Simplify fragment shaders.</p>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="plan" class="slide"><div>
    <section>
      <header>
        <h2>The plan</h2>
      </header>
      <ul class="inner">
        <li class="active">Trivial reject - remove non-visible items.</li>
        <li>Split large primitives, and combine small primitives.</li> 
        <li>Divide screen into non-overlapping tiles (CPU).</li>
        <li>Perform occlusion culling to remove redundant items (CPU).</li>
        <li>Analyze each tile and work out a cheap way to draw it (GPU).</li>
      </ul>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="step1" class="slide"><div>
    <section>
      <header>
        <h2>Coarse tile assignment</h2>
      </header>
      <img src="pictures/wr2_1.png" 
           class="middle"
           style="width: 600px;"
           >
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="step3" class="slide"><div>
    <section>
      <header>
        <h2>BSP tree creation</h2>
      </header>
      <img src="pictures/wr2_tiles.png" 
           class="middle"
           style="width: 600px;"
           >
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="plan2" class="slide"><div>
    <section>
      <header>
        <h2>Drawing tiles</h2>
      </header>
      <ul class="inner">
        <li class="active">Two passes involved for each (coarse) tile.</li>
        <li>(1) Draw primitives (e.g. box-shadows) to render target texture.</li>
        <li>(2) Draw each sub-tile (blend layers from the cache texture).</li>
        <li>Separate shaders per primitive for (1) - easy to add new functionality.</li>
        <li>Very simple shaders for combining layers (2) - fast where it counts.</li>
        <li>Merge passes between coarse tiles.</li>
        <li>Batching is trivial (no overlap ordering in either case).</li>
      </ul>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="potential" class="slide"><div>
    <section>
      <header>
        <h2>Outcomes</h2>
      </header>
      <ul class="inner">
        <li class="active">Significant speed improvements on most pages tested.</li>
        <li>Much <b>less variation</b> in frame timings between pages.</li>
        <li>Easy to add new fast paths, or new features.</li>
        <li>Blending every value in the fragment shader is <b>very</b> interesting!</li>
        <li>- Hardware accelerated subpixel AA text compositing.</li>
        <li>- Per fragment z-sorting for 3d transforms.</li>
        <li>- Fast animation of css filter / blend mode effects.</li>
      </ul>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="next" class="slide"><div>
    <section>
      <header>
        <h2>What's next?</h2>
      </header>
      <ul>
        <li>Fix remaining bugs and edge cases.</li>
        <li>Add missing features.</li>
        <li>Optimizations, tuning and fast paths for common tile types.</li>
        <li>Try out things like per-fragment z-sorting, animated subpixel text etc.</li>
        <li>All tile generation could be moved to GPU via compute shader if using Vulkan / D3D...</li>
      </ul>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="thanks" class="slide oneline"><div>
    <section>
      <header>
        <h2>Questions?</h2>
      </header>
    <footer class="notes">
    </footer>

    </section>
  </div></div>

  <!--
    To hide progress bar from entire presentation
    just remove “progress” element.
    -->
  <div class="progress"><div></div></div>
  <script src="scripts/script.js"></script>
  <!-- Copyright © 2010–2012 Vadim Makeev — pepelsbey.net -->
</body>
</html>